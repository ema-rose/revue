{"version":3,"sources":["webpack:///./src/views/CreatePost.vue?e210","webpack:///./src/services/PostsService.js","webpack:///./src/views/CreatePost.vue","webpack:///./src/views/CreatePost.vue?221e"],"names":["index","Api","get","create","post","delete","id","item","user","username","addComment","postId","commentContent","content","upVote","downVote","class","type","value","enctype","error","title","placeholder","ref","subvue","imagePreview","style","image","name","fileChanged","accept","rows","cols","data","methods","formData","FormData","append","this","console","log","PostsService","then","response","$router","push","params","subvuePermalink","permalink","catch","e","target","files","reader","FileReader","onload","result","readAsDataURL","mounted","$refs","focus","render","__scopeId"],"mappings":"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","file":"js/create.78a95390.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreatePost.vue?vue&type=style&index=0&id=754a4b51&scoped=true&lang=css\"","import Api from '@/services/Api'\n\nexport default {\n  index() {\n    return Api().get('posts')\n  },\n\n  create(post) {\n    return Api().post('posts', post)\n  },\n\n  delete(id) {\n    return Api().delete('posts/id/' + id)\n  },\n\n  item(id) {\n    return Api().get('posts/id/' + id)\n  },\n\n  user(username) {\n    return Api().get('posts/user/' + username)\n  },\n\n  addComment(postId, commentContent) {\n    return Api().post('posts/' + postId + '/comments', { content: commentContent })\n  },\n\n  upVote(postId) {\n    return Api().post('posts/' + postId + '/upvote')\n  },\n\n  downVote(postId) {\n    return Api().post('posts/' + postId + '/downvote')\n  }\n}\n","<template lang=\"html\">\n  <div class=\"create-post container\">\n    <h1>Create Post</h1>\n    <form @submit.prevent=\"create\" enctype=\"multipart/form-data\">\n      <p class=\"error\">{{ error }}</p>\n      <input v-model=\"title\" type=\"text\" placeholder=\"Title\" ref=\"title\">\n      <input v-model=\"subvue\" type=\"text\" placeholder=\"Subvue\">\n      <div v-if=\"imagePreview\" id=\"image-preview\" :style=\"'background-image: url(' + imagePreview + ')'\"></div>\n      <div id=\"image-upload\">\n        <p>\n          <span v-if=\"!image\">Drag your image here to begin<br> or click to browse</span>\n          <span v-else>\n            {{ image.name }}\n          </span>\n        </p>\n        <input type=\"file\" @change=\"fileChanged\" accept=\"image/*\">\n      </div>\n      <textarea v-model=\"content\" name=\"name\" placeholder=\"Content\" rows=\"25\" cols=\"80\"></textarea>\n      <input class=\"button\" type=\"submit\" value=\"Create post\">\n    </form>\n  </div>\n</template>\n\n<script>\nimport PostsService from '@/services/PostsService'\n\nexport default {\n    name: 'create-post',\n\n    data() {\n        return {\n            title: '',\n            subvue: '',\n            content: '',\n            error: null,\n            image: null,\n            imagePreview: null,\n        }\n    },\n\n    methods: {\n        create() {\n            var formData = new FormData();\n            formData.append('title', this.title)\n            formData.append('subvue', this.subvue)\n            formData.append('content', this.content)\n            console.log(formData)\n\n            // If photo has been set\n            if (this.image) {\n                formData.append('image', this.image, this.image.name)\n            }\n\n            PostsService.create(formData)\n                .then(response => {\n                    this.$router.push({\n                        name: 'Post',\n                        params: { id: response.data.id, subvuePermalink: response.data.subvue.permalink }\n                    })\n                })\n                .catch(error => {\n                    this.error = error.response.data.error\n                })\n        },\n\n        fileChanged(e) {\n            this.image = e.target.files[0]\n\n            // Show image preview\n            var reader = new FileReader();\n            reader.onload = (e) => {\n                this.imagePreview = e.target.result;\n            };\n            reader.readAsDataURL(this.image);\n        }\n    },\n\n    mounted() {\n        // Focus title\n        this.$refs.title.focus();\n    }\n}\n</script>\n\n<style scoped lang=\"css\">\nform {\n    max-width: 1500px;\n    width: 100%;\n    margin: 0 auto;\n}\n\ninput,\ntextarea {\n    display: block;\n    width: 100%;\n    margin: 0;\n    border: none;\n    background: rgb(223, 224, 221);\n    padding: 15px;\n    margin: 20px 0;\n\n    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */\n    -moz-box-sizing: border-box; /* Firefox, other Gecko */\n    box-sizing: border-box; /* Opera/IE 8+ */\n}\n\n#image-upload {\n    outline: 2px dashed grey;\n    outline-offset: -10px;\n    background: rgb(223, 224, 221);\n    color: dimgray;\n    cursor: pointer;\n    position: relative;\n    height: 100px;\n}\n\n#image-upload:hover {\n    background: rgb(191, 191, 191);\n}\n\n#image-upload input {\n    opacity: 0; /* invisible but it's there! */\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n}\n\n#image-upload p {\n    text-align: center;\n    position: absolute;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 50%;\n    height: 30%;\n    margin: auto;\n    width: 100%;\n}\n\n#image-preview {\n    margin: 0 auto;\n    max-width: 250px;\n    width: 100%;\n    height: 150px;\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-position: center;\n}\n</style>\n","import { render } from \"./CreatePost.vue?vue&type=template&id=754a4b51&scoped=true&lang=html\"\nimport script from \"./CreatePost.vue?vue&type=script&lang=js\"\nexport * from \"./CreatePost.vue?vue&type=script&lang=js\"\n\nimport \"./CreatePost.vue?vue&type=style&index=0&id=754a4b51&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-754a4b51\"\n\nexport default script"],"sourceRoot":""}